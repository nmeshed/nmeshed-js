{"version":3,"sources":["../src/errors.ts","../src/codec.ts","../src/wasm/nmeshed_core.js","../src/persistence.ts","../src/client.ts","../src/debug.ts"],"names":["ptr","z","listeners"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Error types for nMeshed SDK.\n * \n * Using typed errors allows consumers to handle specific failure modes.\n */\n\n/**\n * Base class for all nMeshed errors.\n */\nexport class NMeshedError extends Error {\n    constructor(message: string, public readonly code: string) {\n        super(message);\n        this.name = 'NMeshedError';\n        // Maintains proper stack trace for where error was thrown (V8 only)\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, NMeshedError);\n        }\n    }\n}\n\n/**\n * Thrown when configuration is invalid.\n */\nexport class ConfigurationError extends NMeshedError {\n    constructor(message: string) {\n        super(message, 'CONFIGURATION_ERROR');\n        this.name = 'ConfigurationError';\n    }\n}\n\n/**\n * Thrown when connection fails or times out.\n */\nexport class ConnectionError extends NMeshedError {\n    constructor(\n        message: string,\n        public readonly cause?: Error,\n        public readonly isRetryable: boolean = true\n    ) {\n        super(message, 'CONNECTION_ERROR');\n        this.name = 'ConnectionError';\n    }\n}\n\n/**\n * Thrown when authentication fails.\n */\nexport class AuthenticationError extends NMeshedError {\n    constructor(message: string = 'Authentication failed') {\n        super(message, 'AUTHENTICATION_ERROR');\n        this.name = 'AuthenticationError';\n    }\n}\n\n/**\n * Thrown when a message fails to parse or validate.\n */\nexport class MessageError extends NMeshedError {\n    constructor(\n        message: string,\n        public readonly rawMessage?: string\n    ) {\n        super(message, 'MESSAGE_ERROR');\n        this.name = 'MessageError';\n    }\n}\n\n/**\n * Thrown when the operation queue exceeds capacity.\n */\nexport class QueueOverflowError extends NMeshedError {\n    constructor(maxSize: number) {\n        super(\n            `Operation queue exceeded maximum capacity of ${maxSize}. ` +\n            'Consider increasing maxQueueSize or reducing send frequency.',\n            'QUEUE_OVERFLOW_ERROR'\n        );\n        this.name = 'QueueOverflowError';\n    }\n}\n","/**\n * @file codec.ts\n * @brief Binary encoding/decoding utilities for nMeshed SDK.\n *\n * Provides efficient serialization methods for different value types.\n * The SDK now uses binary-only wire format, but values can be encoded\n * from various JavaScript types.\n *\n * @example\n * ```typescript\n * import { encodeValue, decodeValue } from 'nmeshed';\n *\n * // Encode a JS object to binary\n * const bytes = encodeValue({ x: 100, y: 200 });\n *\n * // Decode binary back to JS object\n * const obj = decodeValue(bytes);\n * ```\n */\n\n// Pre-allocated encoder/decoder for zero-GC in hot paths\nconst textEncoder = new TextEncoder();\nconst textDecoder = new TextDecoder();\n\n/**\n * Encodes a JavaScript value to binary bytes.\n *\n * - Uint8Array/ArrayBuffer: passed through (zero-copy)\n * - string: UTF-8 encoded\n * - number: Float64 (8 bytes, little-endian)\n * - boolean: single byte (0 or 1)\n * - object/array: JSON stringified then UTF-8 encoded\n *\n * @param value - Any JavaScript value to encode\n * @returns Binary representation\n */\nexport function encodeValue(value: unknown): Uint8Array {\n    // Fast path: already binary\n    if (value instanceof Uint8Array) {\n        return value;\n    }\n    if (value instanceof ArrayBuffer) {\n        return new Uint8Array(value);\n    }\n\n    // Primitive encodings\n    if (typeof value === 'string') {\n        return textEncoder.encode(value);\n    }\n\n    if (typeof value === 'number') {\n        const buf = new ArrayBuffer(8);\n        new DataView(buf).setFloat64(0, value, true);\n        return new Uint8Array(buf);\n    }\n\n    if (typeof value === 'boolean') {\n        return new Uint8Array([value ? 1 : 0]);\n    }\n\n    if (value === null || value === undefined) {\n        return new Uint8Array(0);\n    }\n\n    // Complex types: JSON encode\n    // This is the \"convenience\" path - users can avoid this by pre-encoding\n    try {\n        const json = JSON.stringify(value);\n        return textEncoder.encode(json);\n    } catch (error) {\n        // Circular reference or other JSON error - throw with clear message\n        throw new Error(`Cannot encode value: ${error instanceof Error ? error.message : 'JSON serialization failed'}`);\n    }\n}\n\n/**\n * Decodes binary bytes back to a JavaScript value.\n *\n * Attempts to parse as JSON first. If that fails, returns the raw string.\n * For pure binary data, use the raw Uint8Array directly.\n *\n * @param bytes - Binary data to decode\n * @returns Decoded JavaScript value\n */\nexport function decodeValue(bytes: Uint8Array | ArrayBuffer): unknown {\n    const data = bytes instanceof ArrayBuffer ? new Uint8Array(bytes) : bytes;\n\n    if (data.length === 0) {\n        return null;\n    }\n\n    // Try to decode as UTF-8 string\n    try {\n        const text = textDecoder.decode(data);\n\n        // Try parsing as JSON\n        try {\n            return JSON.parse(text);\n        } catch {\n            // Not JSON, return as string\n            return text;\n        }\n    } catch {\n        // Not valid UTF-8, return raw bytes\n        return data;\n    }\n}\n\n/**\n * Type guard to check if a value is binary data.\n */\nexport function isBinary(value: unknown): value is Uint8Array | ArrayBuffer {\n    return value instanceof Uint8Array || value instanceof ArrayBuffer;\n}\n\n/**\n * Encodes a value for the binary wire protocol.\n * This is the internal encoder used by set() operations.\n *\n * @internal\n */\nexport function encodeForWire(value: unknown): Uint8Array {\n    return encodeValue(value);\n}\n","let wasm;\n\nfunction addToExternrefTable0(obj) {\n    const idx = wasm.__externref_table_alloc();\n    wasm.__wbindgen_externrefs.set(idx, obj);\n    return idx;\n}\n\nfunction debugString(val) {\n    // primitive types\n    const type = typeof val;\n    if (type == 'number' || type == 'boolean' || val == null) {\n        return  `${val}`;\n    }\n    if (type == 'string') {\n        return `\"${val}\"`;\n    }\n    if (type == 'symbol') {\n        const description = val.description;\n        if (description == null) {\n            return 'Symbol';\n        } else {\n            return `Symbol(${description})`;\n        }\n    }\n    if (type == 'function') {\n        const name = val.name;\n        if (typeof name == 'string' && name.length > 0) {\n            return `Function(${name})`;\n        } else {\n            return 'Function';\n        }\n    }\n    // objects\n    if (Array.isArray(val)) {\n        const length = val.length;\n        let debug = '[';\n        if (length > 0) {\n            debug += debugString(val[0]);\n        }\n        for(let i = 1; i < length; i++) {\n            debug += ', ' + debugString(val[i]);\n        }\n        debug += ']';\n        return debug;\n    }\n    // Test for built-in\n    const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n    let className;\n    if (builtInMatches && builtInMatches.length > 1) {\n        className = builtInMatches[1];\n    } else {\n        // Failed to match the standard '[object ClassName]'\n        return toString.call(val);\n    }\n    if (className == 'Object') {\n        // we're a user defined class or Object\n        // JSON.stringify avoids problems with cycles, and is generally much\n        // easier than looping through ownProperties of `val`.\n        try {\n            return 'Object(' + JSON.stringify(val) + ')';\n        } catch (_) {\n            return 'Object';\n        }\n    }\n    // errors\n    if (val instanceof Error) {\n        return `${val.name}: ${val.message}\\n${val.stack}`;\n    }\n    // TODO we could test for more things here, like `Set`s and `Map`s.\n    return className;\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getUint8ArrayMemory0().subarray(ptr / 1, ptr / 1 + len);\n}\n\nlet cachedDataViewMemory0 = null;\nfunction getDataViewMemory0() {\n    if (cachedDataViewMemory0 === null || cachedDataViewMemory0.buffer.detached === true || (cachedDataViewMemory0.buffer.detached === undefined && cachedDataViewMemory0.buffer !== wasm.memory.buffer)) {\n        cachedDataViewMemory0 = new DataView(wasm.memory.buffer);\n    }\n    return cachedDataViewMemory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return decodeText(ptr, len);\n}\n\nlet cachedUint8ArrayMemory0 = null;\nfunction getUint8ArrayMemory0() {\n    if (cachedUint8ArrayMemory0 === null || cachedUint8ArrayMemory0.byteLength === 0) {\n        cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8ArrayMemory0;\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        const idx = addToExternrefTable0(e);\n        wasm.__wbindgen_exn_store(idx);\n    }\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nfunction passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1, 1) >>> 0;\n    getUint8ArrayMemory0().set(arg, ptr / 1);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8ArrayMemory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n\n    const mem = getUint8ArrayMemory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = getUint8ArrayMemory0().subarray(ptr + offset, ptr + len);\n        const ret = cachedTextEncoder.encodeInto(arg, view);\n\n        offset += ret.written;\n        ptr = realloc(ptr, len, offset, 1) >>> 0;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction takeFromExternrefTable0(idx) {\n    const value = wasm.__wbindgen_externrefs.get(idx);\n    wasm.__externref_table_dealloc(idx);\n    return value;\n}\n\nlet cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\ncachedTextDecoder.decode();\nconst MAX_SAFARI_DECODE_BYTES = 2146435072;\nlet numBytesDecoded = 0;\nfunction decodeText(ptr, len) {\n    numBytesDecoded += len;\n    if (numBytesDecoded >= MAX_SAFARI_DECODE_BYTES) {\n        cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n        cachedTextDecoder.decode();\n        numBytesDecoded = len;\n    }\n    return cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(ptr, ptr + len));\n}\n\nconst cachedTextEncoder = new TextEncoder();\n\nif (!('encodeInto' in cachedTextEncoder)) {\n    cachedTextEncoder.encodeInto = function (arg, view) {\n        const buf = cachedTextEncoder.encode(arg);\n        view.set(buf);\n        return {\n            read: arg.length,\n            written: buf.length\n        };\n    }\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nconst NMeshedClientCoreFinalization = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(ptr => wasm.__wbg_nmeshedclientcore_free(ptr >>> 0, 1));\n\nexport class NMeshedClientCore {\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        NMeshedClientCoreFinalization.unregister(this);\n        return ptr;\n    }\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_nmeshedclientcore_free(ptr, 0);\n    }\n    /**\n     * @param {string} key\n     * @param {Uint8Array} value\n     * @param {bigint} timestamp\n     * @returns {Uint8Array}\n     */\n    apply_local_op(key, value, timestamp) {\n        const ptr0 = passStringToWasm0(key, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ptr1 = passArray8ToWasm0(value, wasm.__wbindgen_malloc);\n        const len1 = WASM_VECTOR_LEN;\n        const ret = wasm.nmeshedclientcore_apply_local_op(this.__wbg_ptr, ptr0, len0, ptr1, len1, timestamp);\n        if (ret[3]) {\n            throw takeFromExternrefTable0(ret[2]);\n        }\n        var v3 = getArrayU8FromWasm0(ret[0], ret[1]).slice();\n        wasm.__wbindgen_free(ret[0], ret[1] * 1, 1);\n        return v3;\n    }\n    /**\n     * @param {Uint8Array} packet_data\n     * @returns {any}\n     */\n    merge_remote_delta(packet_data) {\n        const ptr0 = passArray8ToWasm0(packet_data, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.nmeshedclientcore_merge_remote_delta(this.__wbg_ptr, ptr0, len0);\n        if (ret[2]) {\n            throw takeFromExternrefTable0(ret[1]);\n        }\n        return takeFromExternrefTable0(ret[0]);\n    }\n    /**\n     * @returns {Uint8Array}\n     */\n    get_binary_snapshot() {\n        const ret = wasm.nmeshedclientcore_get_binary_snapshot(this.__wbg_ptr);\n        var v1 = getArrayU8FromWasm0(ret[0], ret[1]).slice();\n        wasm.__wbindgen_free(ret[0], ret[1] * 1, 1);\n        return v1;\n    }\n    /**\n     * Initializes the client.\n     * `sync_mode`: \"collaborative\" (default) or \"realtime\" (fast, lossy).\n     * @param {string} workspace_uuid_str\n     * @param {string | null} [sync_mode]\n     */\n    constructor(workspace_uuid_str, sync_mode) {\n        const ptr0 = passStringToWasm0(workspace_uuid_str, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        var ptr1 = isLikeNone(sync_mode) ? 0 : passStringToWasm0(sync_mode, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len1 = WASM_VECTOR_LEN;\n        const ret = wasm.nmeshedclientcore_new(ptr0, len0, ptr1, len1);\n        if (ret[2]) {\n            throw takeFromExternrefTable0(ret[1]);\n        }\n        this.__wbg_ptr = ret[0] >>> 0;\n        NMeshedClientCoreFinalization.register(this, this.__wbg_ptr, this);\n        return this;\n    }\n    /**\n     * @returns {any}\n     */\n    get_state() {\n        const ret = wasm.nmeshedclientcore_get_state(this.__wbg_ptr);\n        if (ret[2]) {\n            throw takeFromExternrefTable0(ret[1]);\n        }\n        return takeFromExternrefTable0(ret[0]);\n    }\n}\nif (Symbol.dispose) NMeshedClientCore.prototype[Symbol.dispose] = NMeshedClientCore.prototype.free;\n\nconst EXPECTED_RESPONSE_TYPES = new Set(['basic', 'cors', 'default']);\n\nasync function __wbg_load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n            } catch (e) {\n                const validResponse = module.ok && EXPECTED_RESPONSE_TYPES.has(module.type);\n\n                if (validResponse && module.headers.get('Content-Type') !== 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction __wbg_get_imports() {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbg_Error_52673b7de5a0ca89 = function(arg0, arg1) {\n        const ret = Error(getStringFromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbg_String_8f0eb39a4a4c2f66 = function(arg0, arg1) {\n        const ret = String(arg1);\n        const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len1 = WASM_VECTOR_LEN;\n        getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\n        getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\n    };\n    imports.wbg.__wbg___wbindgen_debug_string_adfb662ae34724b6 = function(arg0, arg1) {\n        const ret = debugString(arg1);\n        const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len1 = WASM_VECTOR_LEN;\n        getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\n        getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\n    };\n    imports.wbg.__wbg___wbindgen_is_string_704ef9c8fc131030 = function(arg0) {\n        const ret = typeof(arg0) === 'string';\n        return ret;\n    };\n    imports.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n    imports.wbg.__wbg_getRandomValues_9b655bdd369112f2 = function() { return handleError(function (arg0, arg1) {\n        globalThis.crypto.getRandomValues(getArrayU8FromWasm0(arg0, arg1));\n    }, arguments) };\n    imports.wbg.__wbg_new_1ba21ce319a06297 = function() {\n        const ret = new Object();\n        return ret;\n    };\n    imports.wbg.__wbg_new_25f239778d6112b9 = function() {\n        const ret = new Array();\n        return ret;\n    };\n    imports.wbg.__wbg_new_b546ae120718850e = function() {\n        const ret = new Map();\n        return ret;\n    };\n    imports.wbg.__wbg_new_from_slice_f9c22b9153b26992 = function(arg0, arg1) {\n        const ret = new Uint8Array(getArrayU8FromWasm0(arg0, arg1));\n        return ret;\n    };\n    imports.wbg.__wbg_set_3f1d0b984ed272ed = function(arg0, arg1, arg2) {\n        arg0[arg1] = arg2;\n    };\n    imports.wbg.__wbg_set_781438a03c0c3c81 = function() { return handleError(function (arg0, arg1, arg2) {\n        const ret = Reflect.set(arg0, arg1, arg2);\n        return ret;\n    }, arguments) };\n    imports.wbg.__wbg_set_7df433eea03a5c14 = function(arg0, arg1, arg2) {\n        arg0[arg1 >>> 0] = arg2;\n    };\n    imports.wbg.__wbg_set_efaaf145b9377369 = function(arg0, arg1, arg2) {\n        const ret = arg0.set(arg1, arg2);\n        return ret;\n    };\n    imports.wbg.__wbindgen_cast_2241b6af4c4b2941 = function(arg0, arg1) {\n        // Cast intrinsic for `Ref(String) -> Externref`.\n        const ret = getStringFromWasm0(arg0, arg1);\n        return ret;\n    };\n    imports.wbg.__wbindgen_cast_4625c577ab2ec9ee = function(arg0) {\n        // Cast intrinsic for `U64 -> Externref`.\n        const ret = BigInt.asUintN(64, arg0);\n        return ret;\n    };\n    imports.wbg.__wbindgen_cast_9ae0607507abb057 = function(arg0) {\n        // Cast intrinsic for `I64 -> Externref`.\n        const ret = arg0;\n        return ret;\n    };\n    imports.wbg.__wbindgen_cast_d6cd19b81560fd6e = function(arg0) {\n        // Cast intrinsic for `F64 -> Externref`.\n        const ret = arg0;\n        return ret;\n    };\n    imports.wbg.__wbindgen_init_externref_table = function() {\n        const table = wasm.__wbindgen_externrefs;\n        const offset = table.grow(4);\n        table.set(0, undefined);\n        table.set(offset + 0, undefined);\n        table.set(offset + 1, null);\n        table.set(offset + 2, true);\n        table.set(offset + 3, false);\n    };\n\n    return imports;\n}\n\nfunction __wbg_finalize_init(instance, module) {\n    wasm = instance.exports;\n    __wbg_init.__wbindgen_wasm_module = module;\n    cachedDataViewMemory0 = null;\n    cachedUint8ArrayMemory0 = null;\n\n\n    wasm.__wbindgen_start();\n    return wasm;\n}\n\nfunction initSync(module) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (typeof module !== 'undefined') {\n        if (Object.getPrototypeOf(module) === Object.prototype) {\n            ({module} = module)\n        } else {\n            console.warn('using deprecated parameters for `initSync()`; pass a single object instead')\n        }\n    }\n\n    const imports = __wbg_get_imports();\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n    const instance = new WebAssembly.Instance(module, imports);\n    return __wbg_finalize_init(instance, module);\n}\n\nasync function __wbg_init(module_or_path) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (typeof module_or_path !== 'undefined') {\n        if (Object.getPrototypeOf(module_or_path) === Object.prototype) {\n            ({module_or_path} = module_or_path)\n        } else {\n            console.warn('using deprecated parameters for the initialization function; pass a single object instead')\n        }\n    }\n\n    if (typeof module_or_path === 'undefined') {\n        module_or_path = new URL('nmeshed_core_bg.wasm', import.meta.url);\n    }\n    const imports = __wbg_get_imports();\n\n    if (typeof module_or_path === 'string' || (typeof Request === 'function' && module_or_path instanceof Request) || (typeof URL === 'function' && module_or_path instanceof URL)) {\n        module_or_path = fetch(module_or_path);\n    }\n\n    const { instance, module } = await __wbg_load(await module_or_path, imports);\n\n    return __wbg_finalize_init(instance, module);\n}\n\nexport { initSync };\nexport default __wbg_init;\n","/**\n * Persistence layer using IndexedDB to avoid blocking the main thread.\n * This replaces synchronous localStorage calls which cause frame drops.\n */\n\nconst DB_NAME = 'nmeshed_db';\nconst STORE_NAME = 'operation_queue';\nconst DB_VERSION = 1;\n\nexport interface PersistentQueueItem {\n    key: string;\n    value: unknown;\n    timestamp: number;\n}\n\n/**\n * Opens the IndexedDB database.\n */\nfunction openDB(): Promise<IDBDatabase> {\n    return new Promise((resolve, reject) => {\n        const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n        request.onerror = () => reject(request.error);\n        request.onsuccess = () => resolve(request.result);\n\n        request.onupgradeneeded = (event) => {\n            const db = (event.target as IDBOpenDBRequest).result;\n            if (!db.objectStoreNames.contains(STORE_NAME)) {\n                db.createObjectStore(STORE_NAME); // Key is workspaceId\n            }\n        };\n    });\n}\n\n/**\n * Saves the queue array for a specific workspace.\n * Uses a readwrite transaction.\n */\nexport async function saveQueue(workspaceId: string, queue: PersistentQueueItem[]): Promise<void> {\n    try {\n        const db = await openDB();\n        return new Promise((resolve, reject) => {\n            const tx = db.transaction(STORE_NAME, 'readwrite');\n            const store = tx.objectStore(STORE_NAME);\n\n            if (queue.length === 0) {\n                store.delete(workspaceId);\n            } else {\n                store.put(queue, workspaceId);\n            }\n\n            tx.oncomplete = () => resolve();\n            tx.onerror = () => reject(tx.error);\n        });\n    } catch (error) {\n        console.warn('[nMeshed] Failed to save queue to IndexedDB:', error);\n    }\n}\n\n/**\n * Loads the queue for a specific workspace.\n */\nexport async function loadQueue(workspaceId: string): Promise<PersistentQueueItem[]> {\n    try {\n        const db = await openDB();\n        return new Promise((resolve, reject) => {\n            const tx = db.transaction(STORE_NAME, 'readonly');\n            const store = tx.objectStore(STORE_NAME);\n            const request = store.get(workspaceId);\n\n            request.onsuccess = () => resolve(request.result || []);\n            request.onerror = () => reject(request.error);\n        });\n    } catch (error) {\n        console.warn('[nMeshed] Failed to load queue from IndexedDB:', error);\n        return [];\n    }\n}\n","/**\n * @file client.ts\n * @brief Core nMeshed client for real-time synchronization.\n *\n * This module provides the main NMeshedClient class for connecting to\n * nMeshed servers and synchronizing state across distributed clients.\n *\n * Architecture:\n * - Binary CRDT Path: Operations use Flatbuffers for high-performance sync\n * - JSON Control Path: Presence, errors, and ephemeral use JSON for simplicity\n *\n * @example\n * ```typescript\n * import { NMeshedClient } from 'nmeshed';\n *\n * const client = new NMeshedClient({\n *     workspaceId: 'my-workspace',\n *     token: 'jwt-token',\n * });\n *\n * await client.connect();\n * client.set('key', 'value');\n * ```\n */\nimport type {\n    NMeshedConfig,\n    ConnectionStatus,\n    MessageHandler,\n    StatusHandler,\n    EphemeralHandler,\n    PresenceHandler,\n    ResolvedConfig,\n} from './types';\nimport {\n    ConfigurationError,\n    ConnectionError,\n} from './errors';\nimport { encodeValue } from './codec';\nimport init, { NMeshedClientCore } from './wasm/nmeshed_core';\nimport { z } from 'zod';\nimport { loadQueue as dbLoadQueue, saveQueue as dbSaveQueue } from './persistence';\n\n/**\n * Configuration schema for validation.\n */\nconst ConfigSchema = z.object({\n    workspaceId: z.string().min(1, 'workspaceId is required and must be a non-empty string'),\n    token: z.string().min(1, 'token is required and must be a non-empty string'),\n    syncMode: z.enum(['crdt', 'crdt_performance', 'crdt_strict', 'lww']).optional(),\n    userId: z.string().optional(),\n    serverUrl: z.string().optional(),\n    autoReconnect: z.boolean().optional(),\n    maxReconnectAttempts: z.number().nonnegative().optional(),\n    reconnectBaseDelay: z.number().nonnegative().optional(),\n    maxReconnectDelay: z.number().nonnegative().optional(),\n    connectionTimeout: z.number().nonnegative().optional(),\n    heartbeatInterval: z.number().nonnegative().optional(),\n    maxQueueSize: z.number().nonnegative().optional(),\n    debug: z.boolean().optional(),\n});\n\n\n/**\n * Default configuration values.\n */\nconst DEFAULT_CONFIG: Omit<ResolvedConfig, 'workspaceId' | 'token' | 'userId' | 'syncMode'> = {\n    serverUrl: 'wss://api.nmeshed.com',\n    autoReconnect: true,\n    maxReconnectAttempts: 10,\n    reconnectBaseDelay: 1000,\n    maxReconnectDelay: 30000,\n    connectionTimeout: 10000,\n    heartbeatInterval: 30000,\n    maxQueueSize: 1000,\n    debug: false,\n};\n\n/**\n * Queued operation structure.\n */\ninterface QueuedOperation {\n    key: string;\n    value: unknown;\n    timestamp: number;\n}\n\n/**\n * nMeshed client for real-time synchronization.\n *\n * The client manages a WebSocket connection to an nMeshed server,\n * handles automatic reconnection, and provides methods for sending\n * and receiving state updates.\n *\n * ## Features\n * - Automatic reconnection with exponential backoff\n * - Connection timeout to prevent hangs\n * - Heartbeat pings to detect dead connections\n * - Operation queueing when offline\n * - Bounded queue to prevent memory issues\n * - Defensive message parsing\n *\n * @example Basic Usage\n * ```typescript\n * const client = new NMeshedClient({\n        *   workspaceId: 'my-workspace',\n        *   token: 'jwt-token'\n * });\n *\n * await client.connect();\n *\n * client.onMessage((msg) => {\n *   if (msg.type === 'op') {\n * console.log('Update:', msg.payload.key, '=', msg.payload.value);\n *   }\n * });\n *\n * client.set('greeting', 'Hello!');\n * ```\n */\nexport class NMeshedClient {\n    private readonly config: ResolvedConfig;\n    private ws: WebSocket | null = null;\n    private status: ConnectionStatus = 'IDLE';\n    private readonly messageListeners = new Set<MessageHandler>();\n    private readonly statusListeners = new Set<StatusHandler>();\n    private readonly ephemeralListeners = new Set<EphemeralHandler>();\n    private readonly presenceListeners = new Set<PresenceHandler>();\n    private readonly queueListeners = new Set<(size: number) => void>();\n    private reconnectAttempts = 0;\n    private reconnectTimeout: ReturnType<typeof setTimeout> | null = null;\n    private connectionTimeout: ReturnType<typeof setTimeout> | null = null;\n    private heartbeatInterval: ReturnType<typeof setInterval> | null = null;\n    private operationQueue: QueuedOperation[] = [];\n    private core: NMeshedClientCore | null = null;\n    private preConnectState: Record<string, unknown> = {};\n    private isDestroyed = false;\n\n    /**\n     * Creates a new nMeshed client instance.\n     *\n     * @param config - Configuration options\n     * @throws {ConfigurationError} If workspaceId or token is missing\n     */\n    constructor(config: NMeshedConfig) {\n        // Zod at the Gates: Trust no one.\n        const result = ConfigSchema.safeParse(config);\n\n        if (!result.success) {\n            // Fail Loudly\n            const errorMessages = result.error.issues\n                .map(e => `${e.path.join('.')}: ${e.message}`)\n                .join(', ');\n            throw new ConfigurationError(`nMeshed: ${errorMessages}`);\n        }\n\n        const validConfig = result.data;\n\n        this.config = {\n            ...DEFAULT_CONFIG,\n            workspaceId: validConfig.workspaceId.trim(),\n            token: validConfig.token,\n            syncMode: validConfig.syncMode || 'crdt',\n            userId: validConfig.userId?.trim() || this.generateUserId(),\n            ...(validConfig.serverUrl && { serverUrl: validConfig.serverUrl }),\n            ...(validConfig.autoReconnect !== undefined && { autoReconnect: validConfig.autoReconnect }),\n            ...(validConfig.maxReconnectAttempts !== undefined && { maxReconnectAttempts: validConfig.maxReconnectAttempts }),\n            ...(validConfig.reconnectBaseDelay !== undefined && { reconnectBaseDelay: validConfig.reconnectBaseDelay }),\n            ...(validConfig.maxReconnectDelay !== undefined && { maxReconnectDelay: validConfig.maxReconnectDelay }),\n            ...(validConfig.connectionTimeout !== undefined && { connectionTimeout: validConfig.connectionTimeout }),\n            ...(validConfig.heartbeatInterval !== undefined && { heartbeatInterval: validConfig.heartbeatInterval }),\n            ...(validConfig.maxQueueSize !== undefined && { maxQueueSize: validConfig.maxQueueSize }),\n            ...(validConfig.debug !== undefined && { debug: validConfig.debug }),\n        } as ResolvedConfig; // Cast is safe because we merged defaults\n\n        this.loadQueue();\n    }\n\n    /**\n     * Generates a random user ID using crypto if available, falling back to Math.random.\n     */\n    private generateUserId(): string {\n        // Try crypto API first (more random)\n        if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n            return `user-${crypto.randomUUID().substring(0, 8)}`;\n        }\n        // Fallback to Math.random\n        return 'user-' + Math.random().toString(36).substring(2, 11);\n    }\n\n    /**\n     * Logs a debug message if debug mode is enabled.\n     */\n    private log(message: string, ...args: unknown[]): void {\n        if (this.config.debug) {\n            const timestamp = new Date().toISOString();\n            console.log(`[nMeshed ${timestamp}] ${message} `, ...args);\n        }\n    }\n\n    /**\n     * Logs a warning message (always shown).\n     */\n    private warn(message: string, ...args: unknown[]): void {\n        console.warn(`[nMeshed] ${message} `, ...args);\n    }\n\n    /**\n     * Updates the connection status and notifies listeners.\n     */\n    private setStatus(newStatus: ConnectionStatus): void {\n        if (this.status !== newStatus) {\n            this.log(`Status: ${this.status} -> ${newStatus} `);\n            this.status = newStatus;\n\n            // Clone listeners to avoid mutation during iteration\n            const listeners = Array.from(this.statusListeners);\n            for (const listener of listeners) {\n                try {\n                    listener(newStatus);\n                } catch (error) {\n                    this.warn('Status listener threw an error:', error);\n                }\n            }\n        }\n    }\n\n    /**\n     * Builds the WebSocket URL with query parameters.\n     */\n    private buildUrl(): string {\n        const base = this.config.serverUrl.replace(/\\/+$/, '');\n        const params = new URLSearchParams({\n            token: this.config.token,\n            userId: this.config.userId,\n            sync_mode: this.config.syncMode,\n        });\n        // Encode workspaceId to handle special characters\n        const encodedWorkspace = encodeURIComponent(this.config.workspaceId);\n        return `${base}/v1/sync/${encodedWorkspace}?${params.toString()}`;\n    }\n\n    /**\n     * Connects to the nMeshed server.\n     *\n     * @returns A promise that resolves when connected, or rejects on error.\n     * @throws {ConnectionError} If connection fails or times out\n     */\n    connect(): Promise<void> {\n        if (this.isDestroyed) {\n            return Promise.reject(new ConnectionError('Client has been destroyed', undefined, false));\n        }\n\n        if (this.status === 'CONNECTED') {\n            this.log('Already connected');\n            return Promise.resolve();\n        }\n\n        if (this.status === 'CONNECTING') {\n            this.log('Connection already in progress');\n            return Promise.resolve();\n        }\n\n        return new Promise(async (resolve, reject) => {\n            this.setStatus('CONNECTING');\n            try {\n                // Initialize WASM Core before connecting\n                if (!this.core) {\n                    await init();\n                    // Map extended modes (performance/strict) to base 'crdt' for WASM\n                    const coreMode = (this.config.syncMode === 'lww') ? 'lww' : 'crdt';\n                    this.core = new NMeshedClientCore(this.config.workspaceId, coreMode);\n\n                    // Merge pre-connect state into the new core\n                    for (const [key, value] of Object.entries(this.preConnectState)) {\n                        try {\n                            const valBytes = encodeValue(value);\n                            this.core.apply_local_op(key, valBytes, BigInt(Date.now() * 1000));\n                        } catch (e) {\n                            this.warn('Failed to merge preConnectState for key:', key, e);\n                        }\n                    }\n                    this.preConnectState = {}; // Clear it\n                }\n            } catch (error) {\n                this.setStatus('ERROR');\n                reject(new ConnectionError(\n                    'Failed to initialize WASM core',\n                    error instanceof Error ? error : new Error(String(error)),\n                    false\n                ));\n                return;\n            }\n\n            this.setStatus('CONNECTING');\n            const url = this.buildUrl();\n            this.log('Connecting to', url.replace(this.config.token, '[REDACTED]'));\n\n            // Set connection timeout\n            if (this.config.connectionTimeout > 0) {\n                this.connectionTimeout = setTimeout(() => {\n                    this.log('Connection timeout');\n                    this.cleanupConnection();\n                    this.setStatus('ERROR');\n                    reject(new ConnectionError(\n                        `Connection timed out after ${this.config.connectionTimeout} ms`,\n                        undefined,\n                        true\n                    ));\n                }, this.config.connectionTimeout);\n            }\n\n            try {\n                this.ws = new WebSocket(url);\n            } catch (error) {\n                this.clearConnectionTimeout();\n                this.setStatus('ERROR');\n                reject(new ConnectionError(\n                    'Failed to create WebSocket',\n                    error instanceof Error ? error : undefined,\n                    false\n                ));\n                return;\n            }\n\n            this.ws.onopen = () => {\n                this.clearConnectionTimeout();\n                this.log('WebSocket connected');\n                this.setStatus('CONNECTED');\n                this.reconnectAttempts = 0;\n                this.startHeartbeat();\n                this.flushOperationQueue();\n                resolve();\n            };\n\n            this.ws.onclose = (event) => {\n                this.clearConnectionTimeout();\n                this.log('WebSocket closed', { code: event.code, reason: event.reason });\n                this.handleDisconnect(event.code);\n            };\n\n            this.ws.onerror = () => {\n                this.log('WebSocket error');\n                if (this.status === 'CONNECTING') {\n                    this.clearConnectionTimeout();\n                    this.setStatus('ERROR');\n                    reject(new ConnectionError('WebSocket connection failed', undefined, true));\n                }\n            };\n\n            this.ws.binaryType = 'arraybuffer'; // Crucial for performance\n\n            this.ws.onmessage = (event) => {\n                // Use duck-typing for ArrayBuffer check (works in Node.js tests)\n                const isBinaryData = event.data instanceof ArrayBuffer ||\n                    (event.data && typeof event.data === 'object' && 'byteLength' in event.data && !('length' in event.data));\n\n                if (isBinaryData) {\n                    // Binary Path (Fast Lane)\n                    try {\n                        // 1. Merge into WASM Core\n                        const result = this.core?.merge_remote_delta(new Uint8Array(event.data)) as any;\n\n                        // 2. State is now updated in Core. \n                        // Notify listeners based on result type\n                        if (result) {\n                            if (result.type === 'op') {\n                                const syntheticMsg = {\n                                    type: 'op' as const,\n                                    payload: {\n                                        key: result.key,\n                                        value: result.value,\n                                        timestamp: 0\n                                    }\n                                };\n\n                                // Dispatch to listeners (e.g. useDocument, useNmeshed)\n                                const listeners = Array.from(this.messageListeners);\n                                for (const listener of listeners) {\n                                    try {\n                                        listener(syntheticMsg as any);\n                                    } catch (error) {\n                                        this.warn('Message listener threw an error:', error);\n                                    }\n                                }\n                            } else if (result.type === 'init') {\n                                // Handle init message from binary protocol\n                                const syntheticInit = {\n                                    type: 'init' as const,\n                                    data: result.data || {}\n                                };\n\n                                const listeners = Array.from(this.messageListeners);\n                                for (const listener of listeners) {\n                                    try {\n                                        listener(syntheticInit as any);\n                                    } catch (error) {\n                                        this.warn('Message listener threw an error:', error);\n                                    }\n                                }\n                            }\n                        }\n\n                        this.log('Received Binary Update');\n                    } catch (error) {\n                        this.warn('Failed to merge remote delta:', error);\n                    }\n\n                    // If not an Op, assume Ephemeral/Cursor (Legacy or Spec v2)\n                    const listeners = Array.from(this.ephemeralListeners);\n                    for (const listener of listeners) {\n                        try {\n                            listener(event.data);\n                        } catch (error) {\n                            this.warn('Binary listener threw error:', error);\n                        }\n                    }\n                } else {\n                    // TEXT PATH: Control messages only (ephemeral, presence, errors)\n                    // CRDT ops should NEVER be text - only binary Flatbuffers\n                    this.handleControlMessage(event.data);\n                }\n            };\n        });\n    }\n\n    /**\n     * Clears the connection timeout timer.\n     */\n    private clearConnectionTimeout(): void {\n        if (this.connectionTimeout) {\n            clearTimeout(this.connectionTimeout);\n            this.connectionTimeout = null;\n        }\n    }\n\n    /**\n     * Starts the heartbeat interval to detect dead connections.\n     */\n    private startHeartbeat(): void {\n        this.stopHeartbeat();\n\n        if (this.config.heartbeatInterval <= 0) {\n            return;\n        }\n\n        this.heartbeatInterval = setInterval(() => {\n            if (this.ws?.readyState === WebSocket.OPEN) {\n                try {\n                    // Send a binary heartbeat (single byte marker)\n                    // Note: Server interprets 0x00 as keep-alive ping\n                    this.ws.send(new Uint8Array([0x00]));\n                    this.log('Heartbeat sent');\n                } catch (error) {\n                    this.warn('Failed to send heartbeat:', error);\n                }\n            }\n        }, this.config.heartbeatInterval);\n    }\n\n    /**\n     * Stops the heartbeat interval.\n     */\n    private stopHeartbeat(): void {\n        if (this.heartbeatInterval) {\n            clearInterval(this.heartbeatInterval);\n            this.heartbeatInterval = null;\n        }\n    }\n\n    /**\n     * Handles text control messages (ephemeral, presence, errors).\n     * NOTE: CRDT operations use binary Flatbuffers, not this path.\n     */\n    private handleControlMessage(data: string): void {\n        try {\n            const parsed = JSON.parse(data);\n            const type = parsed.type;\n\n            switch (type) {\n                case 'presence':\n                    // Real-time presence update from server\n                    const presencePayload = parsed.payload || parsed;\n                    for (const handler of this.presenceListeners) {\n                        try {\n                            handler(presencePayload);\n                        } catch (error) {\n                            this.warn('Presence handler threw error:', error);\n                        }\n                    }\n                    break;\n\n                case 'ephemeral':\n                    // Cursor/typing indicators from other clients\n                    const ephemeralPayload = parsed.payload || parsed;\n                    for (const listener of this.ephemeralListeners) {\n                        try {\n                            listener(ephemeralPayload);\n                        } catch (error) {\n                            this.warn('Ephemeral listener threw error:', error);\n                        }\n                    }\n                    break;\n\n                case 'error':\n                    // Error from server\n                    this.warn('Server error:', parsed.error || parsed.message || data);\n                    break;\n\n                default:\n                    this.log('Ignoring unknown control message type:', type);\n            }\n        } catch {\n            // Not valid JSON - ignore\n            this.log('Ignoring non-JSON text message');\n        }\n    }\n\n    /**\n     * Handles disconnection and initiates reconnection if configured.\n     */\n    private handleDisconnect(closeCode?: number): void {\n        this.cleanupConnection();\n\n        // Check for authentication errors (typically 4001 or 4003)\n        if (closeCode && closeCode >= 4000 && closeCode < 4100) {\n            this.warn('Authentication error, not reconnecting');\n            this.setStatus('ERROR');\n            return;\n        }\n\n        if (!this.config.autoReconnect) {\n            this.setStatus('DISCONNECTED');\n            return;\n        }\n\n        if (this.reconnectAttempts >= this.config.maxReconnectAttempts) {\n            this.log('Max reconnect attempts reached');\n            this.setStatus('ERROR');\n            return;\n        }\n\n        this.setStatus('RECONNECTING');\n        this.scheduleReconnect();\n    }\n\n    /**\n     * Cleans up the current connection without changing status.\n     */\n    private cleanupConnection(): void {\n        this.stopHeartbeat();\n        this.clearConnectionTimeout();\n\n        if (this.ws) {\n            // Remove handlers to prevent callbacks during cleanup\n            this.ws.onopen = null;\n            this.ws.onclose = null;\n            this.ws.onerror = null;\n            this.ws.onmessage = null;\n\n            try {\n                this.ws.close();\n            } catch {\n                // Ignore errors during cleanup\n            }\n            this.ws = null;\n        }\n    }\n\n    /**\n     * Schedules a reconnection attempt with capped exponential backoff.\n     */\n    private scheduleReconnect(): void {\n        // Calculate delay with exponential backoff, capped at maxReconnectDelay\n        const rawDelay = this.config.reconnectBaseDelay * Math.pow(2, this.reconnectAttempts);\n        const delay = Math.min(rawDelay, this.config.maxReconnectDelay);\n\n        // Add jitter (10%) to prevent thundering herd\n        const jitter = delay * 0.1 * (Math.random() * 2 - 1);\n        const finalDelay = Math.round(delay + jitter);\n\n        this.log(`Reconnecting in ${finalDelay} ms(attempt ${this.reconnectAttempts + 1} / ${this.config.maxReconnectAttempts})`);\n\n        this.reconnectTimeout = setTimeout(() => {\n            this.reconnectAttempts++;\n            this.connect().catch((error) => {\n                this.log('Reconnect failed:', error);\n                // handleDisconnect will be called by the WebSocket close event\n            });\n        }, finalDelay);\n    }\n\n    /**\n     * Flushes any operations queued while disconnected.\n     */\n    private flushOperationQueue(): void {\n        if (this.operationQueue.length === 0) {\n            return;\n        }\n\n        this.log(`Flushing ${this.operationQueue.length} queued operations`);\n\n        // Process a snapshot of the queue to prevent infinite loops if operations are re-queued\n        const queueToProcess = [...this.operationQueue];\n        this.operationQueue = [];\n        this.saveQueue();\n        this.notifyQueueListeners();\n\n        for (const op of queueToProcess) {\n            this.sendOperationInternal(op.key, op.value, op.timestamp);\n        }\n    }\n\n    /**\n     * Sets a key-value pair in the workspace.\n     *\n     * @param key - The key to set (must be non-empty string)\n     * @param value - The value to set\n     * @throws {ConfigurationError} If key is invalid\n     */\n    set(key: string, value: unknown): void {\n        if (!key || typeof key !== 'string') {\n            throw new ConfigurationError('Key must be a non-empty string');\n        }\n        this.sendOperation(key, value);\n    }\n\n    get<T = unknown>(key: string): T | undefined {\n        if (!this.core) {\n            return this.preConnectState[key] as T | undefined;\n        }\n        const state = this.getState();\n        return state[key] as T | undefined;\n    }\n\n    /**\n     * Gets the entire current state of the workspace.\n     *\n     * @returns The current state from the WASM core\n     */\n    getState(): Record<string, unknown> {\n        if (!this.core) return { ...this.preConnectState };\n        try {\n            return this.core.get_state() as Record<string, unknown>;\n        } catch (error) {\n            this.warn('Failed to get state from WASM core:', error);\n            return {};\n        }\n    }\n\n    /**\n     * Sends an operation to update a key-value pair.\n     *\n     * If not connected, the operation is queued and sent when reconnected.\n     *\n     * @param key - The key to update\n     * @param value - The new value\n     */\n    sendOperation(key: string, value: unknown): void {\n        const timestamp = Date.now() * 1000; // Unix microseconds\n\n        if (!this.core) {\n            this.preConnectState[key] = value;\n        }\n\n        if (this.ws?.readyState !== WebSocket.OPEN) {\n            this.queueOperation(key, value, timestamp);\n            return;\n        }\n\n        this.sendOperationInternal(key, value, timestamp);\n    }\n\n    /**\n     * Broadcasts an ephemeral message to all other connected clients.\n     * \n     * @param payload - The data to broadcast (JSON object or Binary ArrayBuffer)\n     */\n    broadcast(payload: unknown): void {\n        if (this.ws?.readyState !== WebSocket.OPEN) {\n            this.warn('Cannot broadcast: not connected');\n            return;\n        }\n\n        try {\n            // Binary Path (Fast Lane) - Always prefer binary\n            if (payload instanceof ArrayBuffer || payload instanceof Uint8Array) {\n                this.ws.send(payload);\n                return;\n            }\n\n            // Encode non-binary payload to binary (uses encodeValue for JSON encoding)\n            const encoded = encodeValue(payload);\n            this.ws.send(encoded);\n        } catch (error) {\n            this.warn('Failed to broadcast message:', error);\n        }\n    }\n\n    /**\n     * Internal method to send an operation (assumes connection is open).\n     */\n    private sendOperationInternal(key: string, value: unknown, timestamp: number): void {\n        // Binary Path: ALWAYS prefer binary for Ops\n        if (!this.core) {\n            this.warn('WASM core not initialized, queuing operation');\n            this.queueOperation(key, value, timestamp);\n            return;\n        }\n\n        // Encode value to binary using codec\n        let valBytes: Uint8Array;\n        try {\n            valBytes = encodeValue(value);\n        } catch (error) {\n            // Encoding failed (e.g., circular reference) - don't queue, just warn\n            this.warn('Failed to encode value, dropping operation:', key, error);\n            return;\n        }\n\n        try {\n            const binaryOp = this.core.apply_local_op(key, valBytes, BigInt(timestamp));\n\n            if (this.ws) {\n                this.ws.send(binaryOp);\n            }\n            this.log('Sent binary operation (WASM-packed):', key);\n        } catch (error) {\n            this.warn('Failed to send binary operation via WASM core:', error);\n            this.queueOperation(key, value, timestamp);\n        }\n    }\n\n    /**\n     * Queues an operation for later sending.\n     */\n    private queueOperation(key: string, value: unknown, timestamp: number): void {\n        // Check queue size limit\n        if (this.config.maxQueueSize > 0 && this.operationQueue.length >= this.config.maxQueueSize) {\n            // Drop oldest operation (FIFO)\n            const dropped = this.operationQueue.shift();\n            this.warn(`Queue full, dropping oldest operation: ${dropped?.key} `);\n        }\n\n        this.operationQueue.push({ key, value, timestamp });\n        this.saveQueue();\n        this.notifyQueueListeners();\n        this.log(`Queued operation: ${key} (queue size: ${this.operationQueue.length})`);\n    }\n\n    /**\n     * Subscribes to incoming messages.\n     *\n     * @param handler - Function to call when a message is received\n     * @returns A cleanup function to unsubscribe\n     */\n    onMessage(handler: MessageHandler): () => void {\n        if (typeof handler !== 'function') {\n            throw new ConfigurationError('Message handler must be a function');\n        }\n\n        this.messageListeners.add(handler);\n        return () => {\n            this.messageListeners.delete(handler);\n        };\n    }\n\n    /**\n     * Subscribes to connection status changes.\n     *\n     * The handler is called immediately with the current status.\n     *\n     * @param handler - Function to call when status changes\n     * @returns A cleanup function to unsubscribe\n     */\n    /**\n     * Subscribes to ephemeral broadcasts.\n     */\n    onBroadcast(handler: EphemeralHandler): () => void {\n        if (typeof handler !== 'function') {\n            throw new ConfigurationError('Broadcast handler must be a function');\n        }\n        this.ephemeralListeners.add(handler);\n        return () => {\n            this.ephemeralListeners.delete(handler);\n        };\n    }\n\n    /**\n     * Subscribes to presence updates.\n     */\n    onPresence(handler: PresenceHandler): () => void {\n        if (typeof handler !== 'function') {\n            throw new ConfigurationError('Presence handler must be a function');\n        }\n        this.presenceListeners.add(handler);\n        return () => {\n            this.presenceListeners.delete(handler);\n        };\n    }\n\n    onStatusChange(handler: StatusHandler): () => void {\n        if (typeof handler !== 'function') {\n            throw new ConfigurationError('Status handler must be a function');\n        }\n\n        this.statusListeners.add(handler);\n        // Immediately call with current status\n        try {\n            handler(this.status);\n        } catch (error) {\n            this.warn('Status handler threw an error:', error);\n        }\n        return () => {\n            this.statusListeners.delete(handler);\n        };\n    }\n\n    /**\n     * Gets the current connection status.\n     */\n    getStatus(): ConnectionStatus {\n        return this.status;\n    }\n\n    /**\n     * Gets the number of operations in the queue.\n     */\n    getQueueSize(): number {\n        return this.operationQueue.length;\n    }\n\n    /**\n     * Disconnects from the server.\n     *\n     * After calling this, you can call `connect()` again to reconnect.\n     */\n    disconnect(): void {\n        this.log('Disconnecting');\n\n        // Cancel any pending reconnection\n        if (this.reconnectTimeout) {\n            clearTimeout(this.reconnectTimeout);\n            this.reconnectTimeout = null;\n        }\n\n        this.cleanupConnection();\n        this.setStatus('DISCONNECTED');\n    }\n\n    /**\n     * Alias for disconnect() for API consistency.\n     */\n    close(): void {\n        this.disconnect();\n    }\n\n    /**\n     * Subscribe to queue size changes.\n     */\n    onQueueChange(handler: (size: number) => void): () => void {\n        this.queueListeners.add(handler);\n        handler(this.operationQueue.length);\n        return () => {\n            this.queueListeners.delete(handler);\n        };\n    }\n\n    private notifyQueueListeners(): void {\n        const size = this.operationQueue.length;\n        for (const handler of this.queueListeners) {\n            try {\n                handler(size);\n            } catch (e) {\n                this.warn(\"Queue listener error\", e);\n            }\n        }\n    }\n\n\n\n    private async loadQueue(): Promise<void> {\n        try {\n            const items = await dbLoadQueue(this.config.workspaceId);\n\n            if (items && items.length > 0) {\n                // Prepend loaded items to preserve order (oldest first)\n                this.operationQueue = [...items, ...this.operationQueue];\n                this.notifyQueueListeners();\n                this.log(`Loaded ${items.length} operations from IndexedDB`);\n            }\n        } catch (e) {\n            this.warn(\"Failed to load queue from IndexedDB\", e);\n        }\n    }\n\n    private saveQueue(): void {\n        dbSaveQueue(this.config.workspaceId, this.operationQueue).catch((e: unknown) => {\n            this.warn(\"Failed to save queue to IndexedDB\", e);\n        });\n    }\n\n\n\n    destroy(): void {\n        this.disconnect();\n        this.isDestroyed = true;\n        this.preConnectState = {};\n        this.operationQueue = [];\n        this.core = null;\n    }\n\n    async getPresence(): Promise<unknown> {\n        const base = this.config.serverUrl.replace(/\\/+$/, '').replace(/^ws/, 'http');\n        const encodedWorkspace = encodeURIComponent(this.config.workspaceId);\n        const url = `${base}/v1/presence/${encodedWorkspace}`;\n\n        const response = await fetch(url, {\n            headers: {\n                'Authorization': `Bearer ${this.config.token}`,\n            },\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to fetch presence: ${response.statusText}`);\n        }\n\n        return response.json();\n    }\n}\n","/**\n * @file debug.ts\n * @brief Debug utilities for nMeshed SDK.\n *\n * Provides helper functions for debugging binary packets without\n * introducing JSON code paths into the production runtime.\n *\n * @example\n * ```typescript\n * import { debugPacket, hexDump } from 'nmeshed/debug';\n *\n * mesh.on('message', (peerId, data) => {\n *     if (DEBUG_MODE) {\n *         console.log(debugPacket(data));\n *     }\n * });\n * ```\n */\n\n/**\n * Converts a binary packet to a human-readable debug representation.\n * This is for development/debugging only - not for production use.\n *\n * @param data - Binary packet data\n * @returns Human-readable string representation\n */\nexport function debugPacket(data: ArrayBuffer | Uint8Array): string {\n    const bytes = data instanceof ArrayBuffer ? new Uint8Array(data) : data;\n\n    if (bytes.length === 0) {\n        return '[Empty Packet]';\n    }\n\n    const lines: string[] = [\n        `[Packet: ${bytes.length} bytes]`,\n        `  Header: ${hexDump(bytes.subarray(0, Math.min(16, bytes.length)))}`,\n    ];\n\n    // Try to detect packet type from first byte (Flatbuffers root offset)\n    if (bytes.length >= 4) {\n        const rootOffset = new DataView(bytes.buffer, bytes.byteOffset).getUint32(0, true);\n        lines.push(`  Root Offset: ${rootOffset}`);\n    }\n\n    // Show ASCII representation for readable portions\n    const ascii = bytesToAscii(bytes.subarray(0, Math.min(64, bytes.length)));\n    if (ascii.length > 0) {\n        lines.push(`  ASCII: \"${ascii}\"`);\n    }\n\n    return lines.join('\\n');\n}\n\n/**\n * Creates a hex dump of binary data (like xxd/hexdump).\n *\n * @param data - Binary data to dump\n * @param bytesPerLine - Bytes per line (default: 16)\n * @returns Formatted hex dump string\n */\nexport function hexDump(data: ArrayBuffer | Uint8Array, bytesPerLine: number = 16): string {\n    const bytes = data instanceof ArrayBuffer ? new Uint8Array(data) : data;\n\n    if (bytes.length === 0) return '(empty)';\n\n    const lines: string[] = [];\n    for (let i = 0; i < bytes.length; i += bytesPerLine) {\n        const slice = bytes.subarray(i, Math.min(i + bytesPerLine, bytes.length));\n        const hex = Array.from(slice).map(b => b.toString(16).padStart(2, '0')).join(' ');\n        const ascii = bytesToAscii(slice);\n        const offset = i.toString(16).padStart(8, '0');\n        lines.push(`${offset}  ${hex.padEnd(bytesPerLine * 3 - 1)}  |${ascii}|`);\n    }\n\n    return lines.join('\\n');\n}\n\n/**\n * Converts bytes to ASCII, replacing non-printable characters with dots.\n */\nfunction bytesToAscii(bytes: Uint8Array): string {\n    return Array.from(bytes)\n        .map(b => (b >= 32 && b <= 126) ? String.fromCharCode(b) : '.')\n        .join('');\n}\n\n/**\n * Attempts to decode binary data as JSON for debugging.\n * Returns null if the data is not valid JSON.\n *\n * WARNING: This allocates memory and should only be used for debugging.\n *\n * @param data - Binary data that might be JSON\n * @returns Parsed JSON object or null\n */\nexport function tryParseAsJson(data: ArrayBuffer | Uint8Array): unknown | null {\n    try {\n        const bytes = data instanceof ArrayBuffer ? new Uint8Array(data) : data;\n        const text = new TextDecoder().decode(bytes);\n        return JSON.parse(text);\n    } catch {\n        return null;\n    }\n}\n\n/**\n * Measures the size of data and returns human-readable string.\n */\nexport function formatBytes(bytes: number): string {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(2)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(2)} MB`;\n}\n\n/**\n * Performance timer for measuring operation latency.\n *\n * @example\n * ```typescript\n * const timer = startTimer();\n * await someOperation();\n * console.log(`Took ${timer.elapsed()}ms`);\n * ```\n */\nexport function startTimer(): { elapsed: () => number; elapsedMicros: () => number } {\n    const start = performance.now();\n    return {\n        elapsed: () => performance.now() - start,\n        elapsedMicros: () => (performance.now() - start) * 1000,\n    };\n}\n"]}